@model TickTaskDoe.Models.MasterModel

@{
    ViewBag.Title = "Index";
}

<link rel="stylesheet" href="~/Content/jquery-ui.css">
<style>

    @@media only screen and (max-width: 768px) {
        .container {
            max-width: 800px !important;
            margin-left: 20px;
        }
       
    }

    @@media screen and (max-width: 650px) {

        .body-content {
            flex-direction: column !important;
            width: 100% !important;
            margin-left: 0px !important;
            margin-right: 0px !important;
        }

        .flex-child2 {
            margin-left: 0px !important;
            width: 100% !important;
        }

        #tableList {
            height: 100px !important;
            overflow: auto;
        }
       
    }

   

    .body-content {
        display: flex;
        flex-direction: row ;
        padding: 10px;
        margin-right: 70px ;
        margin-left: 70px;
        min-height:100% !important;
        min-width:70%;
    }

    .flex-child1 {
        background: #e6e6e6;
        margin-top: 10px;
        /* margin-bottom: -8px; */
        padding: 10px 15px 10px 15px;
        border-radius: 30px;
        flex-grow: 0.2;
        display:flex;
        flex-direction:column;
    }

    #ListCreate {
        margin-top: 20px;
    }

    #tableList {
        height: 100%;
        overflow: auto;
    }

    hr {
        margin-top: 0px !important;
    }
    .flex-child2 {
        flex-grow:1;
        /* flex: 10px; */
        margin-left: 60px;
        border-radius: 30px;
        /* background: aliceblue; */
        background: linear-gradient( rgba(0,0,0,.5), rgba(0,0,0,.8)), url(/images/ListBackground.jpg);
        padding: 10px 30px 0px 30px !important;
        margin-top: 10px;
        /* height: auto; */
        color: white !important;
        background-size: cover;
    }

    .progress-bar {
        background-color: #96ca42 !important; 
    }
 
    #tableList
    {
        list-style:none;
        flex-grow:8;
    }

    .flex-child1 h3 {
        color: #024382;
        margin-left: 5px;
    }

    .flex-child1 a {
        color: #000000 !important;
    }

    .flex-child1 a:hover {
            color: #024382 !important;
        }

    .flex-child2 a {
        color: white !important;
    }

        .flex-child2 a:hover {
            color: white !important;
        }

</style>

    <div class="flex-child1">

        <h3>My Lists</h3>
        <div id="tableList"></div>
        <div id="ListCreate">
            @using (Ajax.BeginForm("AjaxCreateList", "ToDoes", new AjaxOptions
            {
                InsertionMode = InsertionMode.Replace,
                HttpMethod = "POST",
                UpdateTargetId = "tableList",
                OnSuccess = "resetFormList"
            }))
            {
                <div class="form-group">
                    @Html.AntiForgeryToken()
                    <div>
                        @Html.EditorFor(model => model.toDoList.Desc, new { htmlAttributes = new { @class = "form-control", @placeholder = "enter new list name" } })
                        @Html.ValidationMessageFor(model => model.toDoList.Desc, "", new { @class = "text-danger" })
                    </div>
                </div>
            }
        </div>
    </div>

    <div class="flex-child2">
        <div id="tableDiv"></div>
        <div id="toDoCreateForm">
            @using (Ajax.BeginForm("AjaxCreateTask", "ToDoes", new AjaxOptions
            {
                InsertionMode = InsertionMode.Replace,
                HttpMethod = "POST",
                UpdateTargetId = "tableDiv",
                OnSuccess = "resetFormTask"
            }))
            {
                <div class="form-group">
                    @Html.AntiForgeryToken()
                    <div>
                        @Html.EditorFor(model => Model.toDoTask.Desc, new { htmlAttributes = new { @class = "form-control", @placeholder = "enter new task name" } })
                        @Html.ValidationMessageFor(model => Model.toDoTask.Desc, "", new { @class = "text-danger" })
                    </div>
                </div>
            }
        </div>
        <div id="PopupEdit" style="display:none;">
            Window to edit the task details
        </div>
        <div id="PopupDelete" style="display:none;">
            Window to delete the task
        </div>
    </div>


@section Scripts{
    <script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
    <script src="~/CustomUnits/ToDoTable.js"></script>
    <script src="~/Scripts/jquery-ui.js"></script>
    <script>
            function loadTaskForm() {
                $("#toDoCreateForm").show();
            }

            function resetFormList() {
                $('#toDoList_Desc').val('');
            }
            function resetFormTask() {
                $('#toDoTask_Desc').val ('');
            }

        $(document).ready(function () {
            $("#PopupEdit").dialog({
                autoOpen: false,
                title: 'Edit Task',
                width: 'auto',
                height: 'auto',
                modal: true
            });
        });

        $(document).ready(function () {
            $("#PopupDelete").dialog({
                autoOpen: false,
                title: 'Delete Task',
                width: 'auto',
                height: 'auto',
                modal: true
            });
        });

        function PopupEdit() {
            $("#PopupEdit").dialog("open");
        }

        function PopupDelete() {
            $("#PopupDelete").dialog("open");
        }
    </script>
    @Scripts.Render("~/bundles/jqueryval")
}